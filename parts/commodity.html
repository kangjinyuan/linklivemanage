<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title>邻客综合管理平台</title>
		<meta name="keywords" content="">
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Cache-Control" content="no-cache">
		<meta http-equiv="Expires" content="0">
		<link rel="shortcut icon" href="../img/logo.png" type="image/x-icon" />
		<link rel="stylesheet" href="../css/reset.css" />
		<link rel="stylesheet" href="../css/common.css?v=890428a1a1" />
		<script src="../js/jquery-1.9.1.min.js"></script>
		<script src="../layui/layui.all.js"></script>
		<script src='../js/qiniu/qiniu.min.js'></script>
		<script src='../js/qiniu/plupload.full.min.js'></script>
		<script src="../js/upload.js?v=720a47cae8"></script>
		<script src="../js/imageLoadInit.js"></script>
		<script src="../js/imageLoad.js"></script>
		<script src="../js/vue.min.js"></script>
		<script src="../js/requestUrl.js?v=3bb6a59ab6"></script>
		<script src="../js/common.js?v=ac90fbe080"></script>
	</head>

	<body>
		<div class="mask-box v-dom" v-cloak>
			<div class="mask-inner-box">
				<div class="mask-list">
					<div class="mask-list-name"><span class="required-flag">*</span><span class="text">商品名称：</span></div>
					<div class="mask-list-value">
						<input type="text" name="" id="name" value="" class="required length-30" />
					</div>
				</div>
				<div class="mask-list c_b">
					<div class="mask-list-name"><span class="required-flag">*</span><span class="text">库存：</span></div>
					<div class="mask-list-value">
						<input type="text" name="" id="totalStock" placeholder="填写数字" value="" class="required width-80 regular-positive-int" />
					</div>
					<div class="mask-unit-box">份</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="required-flag">*</span><span class="text">原价：</span></div>
					<div class="mask-list-value">
						<input type="text" name="" id="originPrice" placeholder="填写数字" value="" class="required width-80 regular-positive-number" />
					</div>
					<div class="mask-unit-box">元</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="required-flag">*</span><span class="text">售价：</span></div>
					<div class="mask-list-value">
						<input type="text" name="" id="finalPrice" placeholder="填写数字" value="" class="required width-80 regular-positive-number" />
					</div>
					<div class="mask-unit-box">元</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="required-flag">*</span><span class="text">保障：</span></div>
					<div class="mask-list-value">
						<ul class="mask-select-box">
							<li v-for="t in guarantee">
								<div v-bind:class="['icon','icon-check-box','position-left',t.isActive? 'icon-checked':'']" v-on:click="switchActive(t);"></div>
								{{t.name}}
							</li>
						</ul>
					</div>
				</div>
				<div class="mask-list c_b">
					<div class="mask-list-name"><span class="text">封面1：</span></div>
					<div class="mask-list-value">
						<div class="img-box">
							<img src="" alt="" data-width="1" data-height="1" onerror="this.src='../img/common/no-img.png'" />
						</div>
					</div>
					<div class="btn-box">
						<div class="btn-inner-box">
							<div class="btn upload-img" id="image0">上传</div>
						</div>
					</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="text">封面2：</span></div>
					<div class="mask-list-value">
						<div class="img-box" v-for="t in imageList">
							<img v-bind:src="t" alt="" onerror="this.src='../img/common/no-img.png'" />
						</div>
						<div class="img-box">
							<img src="" alt="" data-width="1" data-height="1" onerror="this.src='../img/common/no-img.png'" />
						</div>
					</div>
					<div class="btn-box">
						<div class="btn-inner-box">
							<div class="btn upload-img" id="image1">上传</div>
						</div>
					</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="text">封面3：</span></div>
					<div class="mask-list-value">
						<div class="img-box" v-for="t in imageList">
							<img v-bind:src="t" alt="" onerror="this.src='../img/common/no-img.png'" />
						</div>
						<div class="img-box">
							<img src="" alt="" data-width="1" data-height="1" onerror="this.src='../img/common/no-img.png'" />
						</div>
					</div>
					<div class="btn-box">
						<div class="btn-inner-box">
							<div class="btn upload-img" id="image2">上传</div>
						</div>
					</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="text">封面4：</span></div>
					<div class="mask-list-value">
						<div class="img-box" v-for="t in imageList">
							<img v-bind:src="t" alt="" onerror="this.src='../img/common/no-img.png'" />
						</div>
						<div class="img-box">
							<img src="" alt="" data-width="1" data-height="1" onerror="this.src='../img/common/no-img.png'" />
						</div>
					</div>
					<div class="btn-box">
						<div class="btn-inner-box">
							<div class="btn upload-img" id="image3">上传</div>
						</div>
					</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="text">封面5：</span></div>
					<div class="mask-list-value">
						<div class="img-box" v-for="t in imageList">
							<img v-bind:src="t" alt="" onerror="this.src='../img/common/no-img.png'" />
						</div>
						<div class="img-box">
							<img src="" alt="" data-width="1" data-height="1" onerror="this.src='../img/common/no-img.png'" />
						</div>
					</div>
					<div class="btn-box">
						<div class="btn-inner-box">
							<div class="btn upload-img" id="image4">上传</div>
						</div>
					</div>
				</div>
				<div class="mask-list c_b">
					<div class="mask-list-name"><span class="text">详情1：</span></div>
					<div class="mask-list-value">
						<div class="mask-list-value">
							<div class="img-box">
								<img src="" alt="" onerror="this.src='../img/common/no-img.png'" />
							</div>
						</div>
						<div class="btn-box">
							<div class="btn-inner-box">
								<div class="btn upload-img" id="detail0">上传</div>
							</div>
						</div>
					</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="text">详情2：</span></div>
					<div class="mask-list-value">
						<div class="mask-list-value">
							<div class="img-box">
								<img src="" alt="" onerror="this.src='../img/common/no-img.png'" />
							</div>
						</div>
						<div class="btn-box">
							<div class="btn-inner-box">
								<div class="btn upload-img" id="detail1">上传</div>
							</div>
						</div>
					</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="text">详情3：</span></div>
					<div class="mask-list-value">
						<div class="mask-list-value">
							<div class="img-box">
								<img src="" alt="" onerror="this.src='../img/common/no-img.png'" />
							</div>
						</div>
						<div class="btn-box">
							<div class="btn-inner-box">
								<div class="btn upload-img" id="detail2">上传</div>
							</div>
						</div>
					</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="text">详情4：</span></div>
					<div class="mask-list-value">
						<div class="mask-list-value">
							<div class="img-box">
								<img src="" alt="" onerror="this.src='../img/common/no-img.png'" />
							</div>
						</div>
						<div class="btn-box">
							<div class="btn-inner-box">
								<div class="btn upload-img" id="detail3">上传</div>
							</div>
						</div>
					</div>
				</div>
				<div class="mask-list">
					<div class="mask-list-name"><span class="text">详情5：</span></div>
					<div class="mask-list-value">
						<div class="mask-list-value">
							<div class="img-box">
								<img src="" alt="" onerror="this.src='../img/common/no-img.png'" />
							</div>
						</div>
						<div class="btn-box">
							<div class="btn-inner-box">
								<div class="btn upload-img" id="detail4">上传</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="btn-box">
				<div class="btn-inner-box">
					<div class="btn" onclick="save();">保存</div>
					<div class="btn" onclick="closeMask();">返回</div>
				</div>
			</div>
		</div>
	</body>
	<script>
		param.guarantee = [];
		loadVue(".v-dom", param);

		//编辑
		function save() {
			if(checkRegular()) {
				var parentData = setData.parentData;
				var guarantee = setData.guarantee;
				resetImage();
				var param = {
					name: $("#name").val(),
					totalStock: $("#totalStock").val(),
					originPrice: $("#originPrice").val(),
					finalPrice: $("#finalPrice").val(),
					guarantee: JSON.stringify(guarantee),
					agencyId: "1",
					agencyName: "邻客社区直营店"
				};
				for(var i = 0; i < 5; i++) {
					var image = $("#image" + i).parents(".btn-box").siblings().find("img").attr("src");
					var detail = $("#detail" + i).parents(".btn-box").siblings().find("img").attr("src");
					if(image) {
						image = image.replace(imageUrl, "");
						param["image" + i] = image;
					}
					if(detail) {
						detail = detail.replace(imageUrl, "");
						param["detail" + i] = detail;
					}
				}
				if(parentData){
					param.id = parentData.id;
				}
				request("POST", "shop/commodity/saveOrUpdate.do", param, true, function(res) {
					closeMask();
					parent.layer.msg("操作成功");
					parent.loadData();
				}, function(res) {
					layer.msg("操作失败");
				})
			}
		}
	</script>

</html>